(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-751e5488","chunk-2d0d09e9"],{"0080":function(e,t,n){"use strict";var r=n("42e5");n.n(r).a},"42e5":function(e,t,n){},"696f":function(e,t,n){"use strict";n.r(t);var r=n("a34a"),a=n.n(r),i=n("dfd8");function c(e,t,n,r,a,i,c){try{var s=e[i](c),o=s.value}catch(e){return void n(e)}s.done?t(o):Promise.resolve(o).then(r,a)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function s(e){c(i,r,a,s,o,"next",e)}function o(e){c(i,r,a,s,o,"throw",e)}s(void 0)}))}}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r,c,u,l,d,h,f,v,p,m;return t=e,(n=[{key:"addArticle",value:(m=s(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(i.post)("v1/article/",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)}))),function(e){return m.apply(this,arguments)})},{key:"getArticle",value:(p=s(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(i.get)("v1/article/".concat(t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)}))),function(e){return p.apply(this,arguments)})},{key:"editArticle",value:(v=s(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(i.put)("v1/article/".concat(t),n);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)}))),function(e,t){return v.apply(this,arguments)})},{key:"deleteArticle",value:(f=s(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(i._delete)("v1/article/".concat(t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)}))),function(e){return f.apply(this,arguments)})},{key:"deleteCmsArticle",value:(h=s(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(i._delete)("v1/article/cms/".concat(t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)}))),function(e){return h.apply(this,arguments)})},{key:"getArticles",value:(d=s(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(i.get)("v1/article/",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)}))),function(e){return d.apply(this,arguments)})},{key:"getAllArticles",value:(l=s(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(i.get)("v1/article/all",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)}))),function(e){return l.apply(this,arguments)})},{key:"getQueryArticles",value:(u=s(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(i.get)("v1/article/query",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)}))),function(e){return u.apply(this,arguments)})},{key:"getSubscribeArticles",value:(c=s(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(i.get)("v1/article/subscribe",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)}))),function(e){return c.apply(this,arguments)})}])&&o(t.prototype,n),r&&o(t,r),e}();t.default=new u},d795:function(e,t,n){"use strict";n.r(t);var r=n("a34a"),a=n.n(r),i=n("696f"),c=n("b2d8");function s(e,t,n,r,a,i,c){try{var s=e[i](c),o=s.value}catch(e){return void n(e)}s.done?t(o):Promise.resolve(o).then(r,a)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function c(e){s(i,r,a,c,o,"next",e)}function o(e){s(i,r,a,c,o,"throw",e)}c(void 0)}))}}n("64e1");var u,l,d={name:"MavonEditorPreview",data:function(){return{model:{user_info:{id:0}},subscribeLoading:!1,scroll:0,aside:0,currentIndex:0,heightArr:[],nodes:[],avatarUrl:"",loading:!1,deleted:!1}},components:{mavonEditor:c.mavonEditor},computed:{id:function(){return this.$route.params.id}},created:(l=o(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getData();case 2:this.init(),this.activeIndex=0;case 4:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)}),mounted:function(){this.$nextTick((function(){window.addEventListener("scroll",this.dataScroll,!0)}))},watch:{scroll:function(){this.loadSroll()}},methods:{getData:(u=o(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.$loading({lock:!0,text:"Loading"}),e.prev=1,e.next=4,i.default.getArticle(this.id).finally((function(){t.close()}));case 4:this.model=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1);case 10:case"end":return e.stop()}}),e,this,[[1,7]])}))),function(){return u.apply(this,arguments)}),init:function(){var e=this;this.$nextTick((function(){e.buildNavigation();var t=document.getElementById("mavon-editor");t.children,t.children[1].querySelectorAll("h1,h2,h3,h4,h5").forEach((function(t,n){e.heightArr.push(t.offsetTop+150)})),e.nodes=document.getElementById("navigation").getElementsByClassName("navigator-item")}))},dataScroll:function(){this.scroll=document.documentElement.scrollTop||document.body.scrollTop||document.querySelector(".mavon-editor").scrollTop,this.aside=document.documentElement.scrollTop||document.body.scrollTop||document.querySelector(".aside-list").scrollTop},loadSroll:function(){for(var e=0;e<this.heightArr.length-1;e++)this.nodes[e]&&null!=this.nodes[e].classList&&(this.scroll>=this.heightArr[e]&&this.scroll<=this.heightArr[e+1]?this.nodes[e].classList.add("active"):this.nodes[e].classList.remove("active"))},buildNavigation:function(){var e=document.getElementById("navigation");e.innerHTML=this.$refs.mavon.d_render;var t=e.children,n=[],r=this.$router;if(t.length)for(var a=0;a<t.length;a++){var i=t[a].children&&t[a].children.length?t[a].children[0].id:"";c(t[a],a,t,i)}function c(e,t,a,i){if(/^H[1-6]{1}$/.exec(e.tagName)){e.classList.add("navigator-item");for(var c=i,s=e.innerHTML.split("</a>")[1],o=e.childNodes,u=o.length-1;u>=0;u--)e.removeChild(o[u]);var l=document.createElement("a");l.id=c,l.innerHTML=s,e.appendChild(l),e.onclick=function(){for(var t=e.parentElement.children,n=0;n<t.length;n++)t[n].classList.remove("active");e.classList.add("active");var a="#"+this.children[0].id;location.hash!=a&&r.replace(a)},n.push(e)}else e.style.display="none"}var s=[];n.forEach((function(e,t){var r=e.tagName.substr(1),a=n[t-1]?n[t-1].tagName.substr(1):"";a?r>a?s[s.length-1].push(e):r>s[s.length-1][0].tagName.substr(1)?s[s.length-1].push(e):s.push([e]):s.push([e])})),s.forEach((function(e){var t=e[0].tagName.substr(1);e.forEach((function(e){var n=e.tagName.substr(1)-t+1;e.classList.add("heading_"+n)}))}))}}},h=(n("0080"),n("2877")),f=Object(h.a)(d,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"page-header-index-wide"},[n("el-row",{attrs:{gutter:24}},[n("el-col",{attrs:{xl:18,lg:18,md:24,sm:24,xs:24}},[n("div",{staticClass:"mavon-editor"},[n("mavon-editor",{ref:"mavon",attrs:{id:"mavon-editor",toolbarsFlag:!1,editable:!1,readModel:!0,defaultOpen:"preview",subfield:!1,boxShadow:!1,previewBackground:"#fff",navigation:!1},model:{value:e.model.content,callback:function(t){e.$set(e.model,"content",t)},expression:"model.content"}})],1)]),n("el-col",{attrs:{xl:6,lg:6,md:24,sm:24,xs:24}},[n("el-card",{staticClass:"aside-list",style:this.aside>260?"position: fixed;top:80px;width:260px;":"",attrs:{shadow:"never","body-style":{padding:"12px"}}},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[e._v("目录")])]),n("div",{staticClass:"wx_navigation",attrs:{id:"navigation"}})])],1)],1)],1)])}),[],!1,null,"7efc94ca",null);t.default=f.exports}}]);